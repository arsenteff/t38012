	.TITLE DBGCNL
	.MCALL .TTYOUT,.PRINT,.EXIT,.TTYIN
STSCNL: .WORD
CPV100: .WORD

.ITEM F$CANAL,,,<>,<ëéëíéüçàÖ äÄçÄãÄ åèà>
	BIT	#1,STSCNL
	BNE	1$
	BIS	#1,STSCNL
	MOV	100,CPV100
	MOV	#VI100,100
	RETURN
1$:	MOV	CPV100,100
	BIC	#1,STSCNL
	RETURN

TEMP:	.WORD
RGAD:	.WORD
RGUPR:	.WORD
INTCNT: .WORD
VI100:
	INC	INTCNT
	CMP	INTCNT,#6.
	BLT	5$
	CLR	INTCNT
	;;BIT	#MNUPRINT,MNUSTS
	;;BNE	5$
	MOV	R0,-(SP)
	MOV	R1,-(SP)
	MOV	R2,-(SP)
	MOV	R3,-(SP)
	MOV	R4,-(SP)
	MOV	R5,-(SP)

	MOV	4,-(SP)
	MOV	#VI4,4
	CLR	STSV4
	MOV	160372,RGUPR
	MOV	160352,RGAD
	MOV	(SP)+,4
	MOV	STSV4,TEMP
	TST	STSV4
	BNE	10$

	MOV	RGAD,R0
	CALL	OCTASC
	CLR	R1
1$:	ROR	RGUPR
	BCS	2$
	MOV	STRCNL(R1),BUFUPR(R1)
	MOV	STRCNL+2(R1),BUFUPR+2(R1)
	BR	3$
2$:	MOV	#20040,BUFUPR(R1)
	MOV	#20040,BUFUPR+2(R1)
3$:
	ADD	#4,R1
	CMP	R1,#64.
	BLT	1$
	.PRINT	#ESCCMD
6$:
	MOV    (SP)+,R5
	MOV    (SP)+,R4
	MOV    (SP)+,R3
	MOV    (SP)+,R2
	MOV    (SP)+,R1
	MOV    (SP)+,R0
5$:	RTI
10$:	.PRINT #ERRVU
	BR     6$

STSV4:	.WORD
VI4:	INC    STSV4
	RTI

ESCCMD: ;.BYTE	 33,131,64,40,15	;
	;.ASCII <33>/H/ 		 ;<äìêëéê Ç çÄóÄãé êìãéçÄ>
	.BYTE	33,131,40,40
BUFLIB: .BLKB	6
	.BYTE	11,16
BUFUPR: .BLKB	64.
CURPOS: .BYTE	33,131,67,42,17,200
	.EVEN
STRCNL: .ASCII /éíÇ*Ñáè*Ñóí*èáè*éÅå*Çì**áå**êáå*èá**áèê*Äëè*Äàè*íáì*äèÄ*èêÉ*ëÅê*/
ERRVU:	.ASCII <17><33>/HERROR VU-0480/<33>/J/
	.BYTE	33,131,67,42,200
	.EVEN
